<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <?!= include('css'); ?>
    <script>
      var state = 1;
      function next_step() {
        if (state == 1){
          document.getElementById("edit_block").style.display = "block";
          document.getElementById("generate_block").style.display = "none";
          document.getElementById("previous_step").disabled = false;
          state = 2;
        }
        else if(state == 2){
          document.getElementById("edit_block").style.display = "none";
          document.getElementById("section_block").style.display = "block";
          document.getElementById("next_step").disabled = true;
          state = 3;
        }  
      }
      function previous_step() {
        if (state == 2){
          document.getElementById("edit_block").style.display = "none";
          document.getElementById("generate_block").style.display = "block";
          document.getElementById("previous_step").disabled = true;
          state = 1;
        }
        else if (state == 3){
          document.getElementById("edit_block").style.display = "block";
          document.getElementById("section_block").style.display = "none";
          document.getElementById("next_step").disabled = false;
          state = 2;
        }  
      }
      function onSuccess(res) {
        if(res == 1 ){
          next_step();
        }
      }
      function outline_generate_submit() {
        google.script.run.Waiting_Dialog();
        google.script.run.withSuccessHandler(onSuccess).outline_generate(document.getElementById("outline_generate_form"));
        //google.script.run.test();
      }
      function show_dialog(res){
        if(res == 2){
          google.script.run.Null_select_Dialog();
        }
      }
      function edit_submit() {
        google.script.run.withSuccessHandler(show_dialog).is_select();
        google.script.run.Waiting_Dialog();
        google.script.run.outline_edit(document.getElementById("edit_form"));
      }

      function section_generate_submit() {
        google.script.run.withSuccessHandler(show_dialog).is_select();
        google.script.run.Waiting_Dialog();
        google.script.run.section_generate(document.getElementById("section_form"));
      }
      // function generate_outline() {
      //   document.getElementById("generate_block").style.display = "block";
      //   document.getElementById("regenerate").style.display = "none";
      // }
       
    </script>  
  </head>
  <body >
    <!-- 大纲生成板块 -->
    <!-- <h1 id="regenerate" style="display: none;" onclick="generate_outline()">重新生成大纲</h1> -->
    <div class="block" id="generate_block">
      <h1 id="generate">生成大纲</h1>
      <!-- <p>请输入标题或者综述描述</p> -->
        <form id="outline_generate_form">
          <label for="title">标题:</label><br>
          <input type="text" id="title" name="title" ><br><br>
          <label for="description">综述描述:</label><br>
          <input type="text" id="description" name="description"><br><br>
          <input type="button" value="提交" onclick="outline_generate_submit();">
        </form>
    </div>
    
    <div class="block" id="edit_block">
      <!-- 大纲修改板块 -->
      <h1>修改内容</h1>      
      <div>
        <p>请选中相应内容并描述您想怎样修改它</p>
        <form id="edit_form">
          <label for="instruction">描述：</label>
          <input type="text" id="instruction" name="instruction"><br><br>
          <input type="button" value="提交" onclick="edit_submit();">
        </form>
      </div>
    </div>
    
      <!-- 内容生成板块 -->
    <div class="block" id="section_block">
      <h1>内容生成</h1>
      <div>
        <p>请选中段落标题以生成相应内容</p>
        <form id="section_form">
          <input type="button" value="生成" onclick="section_generate_submit();">
        </form>
      </div>
    </div>
    <!--分步按钮  -->
    <div id="button_box" style="width:100%;">
      <button id="previous_step" onclick="previous_step()" disabled="true">上一步</button>
      <button id="next_step" onclick="next_step()" >下一步</button> 
    </div>
  </body>
</html>
